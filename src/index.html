<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <link rel="stylesheet" href="styles.css" />
    <title>Code Editor</title>
    <script type="module" src="/main.js" defer></script>
  </head>

  <body>
    <div id="container">
      <div id="main-row">
        <!-- Main content -->
        <div id="sidebar-left">
          <div id="project-panel" class="sidebar-panel">
            <div class="sidebar-panel-header">Project</div>
            <div class="sidebar-panel-content"></div>
          </div>
          <div id="git-panel" class="sidebar-panel" style="display: none;">
            <div class="sidebar-panel-header">Git</div>
            <div class="sidebar-panel-content"></div>
          </div>
          <div id="outline-panel" class="sidebar-panel" style="display: none;">
            <div class="sidebar-panel-header">Outline</div>
            <div class="sidebar-panel-content"></div>
          </div>

          <div id="collab-panel" class="sidebar-panel" style="display: none;">
            <div class="sidebar-panel-header">Collaboration</div>
            <div class="sidebar-panel-content"></div>
          </div>
          <div id="find-in-project-panel" class="sidebar-panel" style="display: none;">
            <div class="sidebar-panel-header">Find in Project</div>
            <div class="sidebar-panel-content">
              <div class="search-controls">
                <input type="text" id="find-in-project-input" placeholder="Search files and contents...">
                <div class="search-options">
                  <button id="search-regex-toggle" class="search-option-btn" title="Use Regular Expression">.*</button>
                  <button id="search-case-toggle" class="search-option-btn" title="Match Case">Aa</button>
                  <button id="search-whole-word-toggle" class="search-option-btn" title="Match Whole Word">|ab|</button>
                </div>
              </div>
              <div class="search-type-tabs">
                <button id="search-files-tab" class="search-tab active">Files</button>
                <button id="search-content-tab" class="search-tab">Content</button>
              </div>
              <div id="search-results" class="search-results-container"></div>
              <div id="search-status" class="search-status"></div>
            </div>
          </div>
        </div>
        
        <div id="main">
          <div id="editor-toolbar">
            <button id="open-project-button" class="toolbar-button">Open Project</button>
            <button id="search-tool-button" class="toolbar-button">Search</button>
            <button id="settings-tool-button" class="toolbar-button">Settings</button>
            <span id="editor-filename"></span>
          </div>
          
          <div id="editor-tabs">
            <div id="editor-tabs-tabs-section"></div>
          </div>
          
          <div id="editor">
            <div id="welcome-screen">
              <h1>Welcome to Code Editor</h1>
              <p>Open a project to get started</p>
            </div>
          </div>
        </div>
        
        <!-- Bottom panels positioned between sidebars -->
        <div id="bottom-panels-container">
          <!-- Terminal panel (bottom) -->
          <div id="terminal" class="bottom-panel" style="display: none;">
            <div class="terminal-header">
              <div class="terminal-tabs" id="terminal-tabs"></div>
              <div class="terminal-controls">
                <button class="terminal-tab-new" id="terminal-tab-new" title="New Terminal">+</button>
              </div>
            </div>
            <div class="terminal-content" id="terminal-content"></div>
          </div>
          

        </div>
        
        <div id="sidebar-right" style="display: none;">
          <div id="ai-panel" class="sidebar-panel">
            <div class="sidebar-panel-header">AI Assistant</div>
            <div class="sidebar-panel-content"></div>
          </div>
        </div>
      </div>
      
      <div id="statusbar">
        <div class="statusbar-left">
          <button id="project-panel-button" class="statusbar-button">Project</button>
          <button id="git-panel-button" class="statusbar-button">Git</button>
          <button id="outline-panel-button" class="statusbar-button">Outline</button>
  
          <button id="collab-panel-button" class="statusbar-button">Collab</button>
          <button id="search-project-button" class="statusbar-button">Find</button>
        </div>
        <div class="statusbar-right">
          <button id="terminal-statusbar-button" class="statusbar-button">Terminal</button>
          <button id="ai-panel-statusbar-button" class="statusbar-button">AI</button>
        </div>
      </div>
      
      <div id="notification-previews"></div>
      <div id="tooltip">tooltip</div>
      <dialog id="modal">modal</dialog>
      <div id="command-palette" class="hidden">
        <input type="text" id="command-palette-input" placeholder="Type a command...">
        <div id="command-palette-results"></div>
      </div>
    </div>
    
    <script>
      // Make settings available globally
      window.settings = {
        theme: "dark",
        fontSize: 14,
        tabSize: 2,
        lastProject: null,
        editor: {
          minimap: {
            enabled: true
          },
          wordWrap: "off",
          lineNumbers: "on",
          folding: true,
          renderWhitespace: "selection"
        },
        themes: {
          dark: {
            name: "Dark Theme",
            base: "dark",
            background: "#1e1e1e",
            foreground: "#d4d4d4",
            caret: "#ffffff",
            selection: "#264f78",
            selectionMatch: "#094771",
            lineHighlight: "#2a2d2e",
            gutterBackground: "#1e1e1e",
            gutterForeground: "#858585",
            syntax: {
              keyword: "#569cd6",
              string: "#ce9178",
              comment: "#6a9955",
              number: "#b5cea8",
              operator: "#d4d4d4",
              punctuation: "#d4d4d4",
              variable: "#9cdcfe",
              function: "#dcdcaa",
              type: "#4ec9b0",
              tag: "#569cd6",
              attribute: "#92c5f8",
              property: "#9cdcfe",
              constant: "#4fc1ff",
              error: "#f44747"
            },
            customKeywords: {
              jsKeywords: ["const", "let", "var", "function", "class", "extends", "implements", "interface", "type", "enum"],
              jsBuiltins: ["console", "window", "document", "localStorage", "sessionStorage", "fetch", "Promise"],
              pythonKeywords: ["def", "class", "import", "from", "as", "with", "lambda", "yield", "async", "await"],
              pythonBuiltins: ["print", "len", "range", "enumerate", "zip", "map", "filter", "reduce"],
              rustKeywords: ["fn", "struct", "enum", "impl", "trait", "mod", "use", "pub", "mut", "let"],
              rustBuiltins: ["Vec", "HashMap", "Option", "Result", "String", "str"],
              goKeywords: ["func", "struct", "interface", "type", "var", "const", "package", "import"],
              goBuiltins: ["fmt", "log", "http", "json", "time", "context"],
              controlFlow: ["if", "else", "elif", "for", "while", "switch", "case", "break", "continue", "return"],
              types: ["int", "float", "string", "bool", "array", "object", "null", "undefined"]
            }
          },
          light: {
            name: "Light Theme",
            base: "light",
            background: "#ffffff",
            foreground: "#000000",
            caret: "#000000",
            selection: "#add6ff",
            selectionMatch: "#a8dadc",
            lineHighlight: "#f0f0f0",
            gutterBackground: "#ffffff",
            gutterForeground: "#237893",
            syntax: {
              keyword: "#0000ff",
              string: "#a31515",
              comment: "#008000",
              number: "#098658",
              operator: "#000000",
              punctuation: "#000000",
              variable: "#001080",
              function: "#795e26",
              type: "#267f99",
              tag: "#800000",
              attribute: "#ff0000",
              property: "#001080",
              constant: "#0070c1",
              error: "#cd3131"
            },
            customKeywords: {
              jsKeywords: ["const", "let", "var", "function", "class", "extends", "implements", "interface", "type", "enum"],
              jsBuiltins: ["console", "window", "document", "localStorage", "sessionStorage", "fetch", "Promise"],
              pythonKeywords: ["def", "class", "import", "from", "as", "with", "lambda", "yield", "async", "await"],
              pythonBuiltins: ["print", "len", "range", "enumerate", "zip", "map", "filter", "reduce"],
              rustKeywords: ["fn", "struct", "enum", "impl", "trait", "mod", "use", "pub", "mut", "let"],
              rustBuiltins: ["Vec", "HashMap", "Option", "Result", "String", "str"],
              goKeywords: ["func", "struct", "interface", "type", "var", "const", "package", "import"],
              goBuiltins: ["fmt", "log", "http", "json", "time", "context"],
              controlFlow: ["if", "else", "elif", "for", "while", "switch", "case", "break", "continue", "return"],
              types: ["int", "float", "string", "bool", "array", "object", "null", "undefined"]
            }
          }
        },
        icons: {
          file: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>',
          folder: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>',
          javascript: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>',
          html: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>',
          css: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M16.2 7.8l-2 8-4-2-2-4 8-2z"></path></svg>',
          json: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><path d="M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1"></path><path d="M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1"></path></svg>',
          markdown: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><path d="M4 12h3l2 2 2-2h3"></path></svg>',
          python: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>',
          rust: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline></svg>'
        },
        terminal: {
          font: {
            family: '"Cascadia Code", "Fira Code", "Consolas", "Monaco", "Courier New", monospace',
            size: 14
          },
          cursor: {
            blink: true,
            style: "block"
          },
          theme: {
            background: "#1e1e1e",
            foreground: "#ffffff",
            cursor: "#ffffff",
            selection: "#3a3a3a",
            black: "#000000",
            red: "#cd3131",
            green: "#0dbc79",
            yellow: "#e5e510",
            blue: "#2472c8",
            magenta: "#bc3fbc",
            cyan: "#11a8cd",
            white: "#e5e5e5",
            brightBlack: "#666666",
            brightRed: "#f14c4c",
            brightGreen: "#23d18b",
            brightYellow: "#f5f543",
            brightBlue: "#3b8eea",
            brightMagenta: "#d670d6",
            brightCyan: "#29b8db",
            brightWhite: "#ffffff"
          }
        },
        fileExplorer: {
          currentTheme: "dark",
          showHiddenFiles: false,
          sortBy: "name",
          sortOrder: "asc",
          expandedFolders: [], // Array of absolute paths to expanded folders
          openFiles: [], // Array of absolute paths to open files
          shortcuts: {
            "new-file": "Ctrl+N",
            "new-folder": "Ctrl+Shift+N", 
            "copy": "Ctrl+C",
            "cut": "Ctrl+X",
            "paste": "Ctrl+V",
            "delete": "Delete",
            "rename": "F2"
          }
        },
        terminal: {
          shell: "",
          fontSize: 14,
          fontFamily: "JetBrains Mono, Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace",
          cursorBlink: true
        },
        keybindings: {
          save: "Ctrl+S",
          open: "Ctrl+O", 
          find: "Ctrl+F",
          replace: "Ctrl+H",
          goto: "Ctrl+G",
          commandPalette: "Ctrl+Shift+P",
          settings: "Ctrl+,",
          toggleTerminal: "Ctrl+`"
        }
      };
    </script>
  </body>
</html>